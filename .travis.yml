dist: bionic
language: minimal

env:
  - DEBIAN_FRONTEND="noninteractive" HEXBLADE_APT_ARGS='-o Dpkg::Progress-Fancy="0"'

#services:
#  - docker

before_install:
 - sudo ./cmds/installer-prepare.sh

script:
  - sudo mkdir /mnt/installer
  - sudo ./cmds/strap.sh
  - sudo ./cmds/chroot-installer.sh
  - sudo ./cmds/chroot-package.sh basic
  - sudo ./cmds/chroot-live.sh
  - sudo ./cmds/mksquashfs.sh
  - sudo ./cmds/iso.sh

# deploy:
#   - provider: releases
#     overwrite: true
#     draft: false
#     prerelease: true
#     file: build/pack/*
#     edge: true
#     on:
#       tags: true
#       condition: $TRAVIS_TAG == edge
#
#   - provider: releases
#     overwrite: false
#     draft: false
#     prerelease: false
#     file: build/pack/*
#     edge: true
#     on:
#       tags: true
#       condition: $TRAVIS_TAG =~ ^[0-9]+\.[0-9]+\.[0-9]+$
#
#   - provider: script
#     edge: true
#     script: ./ci/ci.sh deploy_docker latest
#     on:
#       tags: true
#       condition: $TRAVIS_TAG =~ ^[0-9]+\.[0-9]+\.[0-9]+$
#
#   - provider: script
#     script: ./ci/ci.sh deploy_docker
#     edge: true
#     on:
#       tags: true
#       condition: $TRAVIS_TAG == edge
